<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
  <title>Custom</title>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  <script src="js/settings.js"></script>
  <script src="js/auth.js"></script>
</head>
<body class="page-custom">
  <header class="site-header" id="global-header">
    <div class="site-header__profile">
      <div class="site-header__avatar-container progress-ring">
        <img
          src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2296%22%20height%3D%2296%22%20viewBox%3D%220%200%2096%2096%22%3E%3Cdefs%3E%3ClinearGradient%20id%3D%22g%22%20x1%3D%220%22%20y1%3D%220%22%20x2%3D%221%22%20y2%3D%221%22%3E%3Cstop%20offset%3D%220%22%20stop-color%3D%22%23c5d7ff%22/%3E%3Cstop%20offset%3D%221%22%20stop-color%3D%22%237fa8ff%22/%3E%3C/linearGradient%3E%3C/defs%3E%3Ccircle%20cx%3D%2248%22%20cy%3D%2248%22%20r%3D%2248%22%20fill%3D%22url(%23g)%22/%3E%3Cpath%20fill%3D%22%23fff%22%20opacity%3D%220.85%22%20d%3D%22M48%2046a14%2014%200%201%200-14-14A14%2014%200%200%200%2048%2046Zm0%207c-12.1%200-22%206.56-22%2014.66V70a24%2024%200%200%200%2044%200v-2.34C70%2059.56%2060.1%2053%2048%2053Z%22/%3E%3C/svg%3E"
          alt="Foto do usuário"
          class="site-header__avatar"
          id="header-avatar"
        >
      </div>
      <div class="site-header__text">
        <span class="site-header__name" id="header-username">Jogador</span>
        <span class="site-header__level" id="header-level">Nível 1</span>
      </div>
    </div>
    <div class="site-header__actions">
      <button id="login-btn" class="site-header__button" type="button">Entrar</button>
    </div>
  </header>
  <div id="custom-content" style="text-align:center;margin-top:50px;"></div>
  <div id="login-flow" class="login-flow hidden" role="dialog" aria-modal="true" aria-labelledby="login-flow-title" aria-hidden="true">
    <div class="login-flow__panel">
      <img src="selos%20modos%20de%20jogo/logoitalk2.png" alt="Logo American Life" class="login-flow__logo" width="70" height="70">
      <h1 id="login-flow-title" class="login-flow__title">Bem-vindo</h1>
      <form id="login-flow-form" class="login-flow__form" autocomplete="off" novalidate>
        <div class="login-flow__step login-flow__step--active" data-step="username">
          <label for="login-flow-username">Nome de usuário</label>
          <input type="text" id="login-flow-username" name="login-flow-username" maxlength="40" required>
          <button type="button" class="login-flow__submit" data-action="next">Continuar</button>
        </div>
        <div class="login-flow__step" data-step="password">
          <label for="login-flow-password">Senha</label>
          <input type="password" id="login-flow-password" name="login-flow-password" required>
          <button type="button" class="login-flow__submit" data-action="next">Continuar</button>
        </div>
        <div class="login-flow__step" data-step="confirm">
          <label for="login-flow-confirm">Confirmar senha</label>
          <input type="password" id="login-flow-confirm" name="login-flow-confirm" required>
          <button type="submit" class="login-flow__submit">Criar conta</button>
        </div>
        <p id="login-flow-error" class="login-flow__error" role="alert"></p>
      </form>
    </div>
  </div>
  <script>
    function formatTime(ms) {
      const sec = Math.floor(ms / 1000);
      const min = Math.floor(sec / 60);
      const s = sec % 60;
      return `${min}m ${s}s`;
    }
    function createRankingTable(data, color, columns) {
      const table = document.createElement('table');
      table.className = `ranking-table ${color}`;
      const header = document.createElement('tr');
      header.innerHTML = columns.map(c => `<th>${c.label}</th>`).join('');
      table.appendChild(header);
      data.forEach(item => {
        const row = document.createElement('tr');
        columns.forEach(c => {
          const td = document.createElement('td');
          td.textContent = item[c.field];
          row.appendChild(td);
        });
        table.appendChild(row);
      });
      return table;
    }
    document.addEventListener('DOMContentLoaded', () => {
      const container = document.getElementById('custom-content');
      const statsData = JSON.parse(localStorage.getItem('modeStats') || '{}');
      for (let i = 1; i <= 6; i++) {
        const stats = statsData[i] || {};
        const totalTime = stats.totalTime || 0;
        const total = stats.totalPhrases || 0;
        const correct = stats.correct || 0;
        const wrong = stats.wrong || 0;
        const report = stats.report || 0;
        const acc = total ? ((correct / total) * 100).toFixed(2) : '0';
        const avg = total ? formatTime(totalTime / total) : '0s';
        const reportPerc = total ? ((report / total) * 100).toFixed(2) : '0';
        const section = document.createElement('div');
        section.innerHTML = `
          <h1 class="custom-title">Modo ${i} - Resultados</h1>
          <div class="custom-info">Frases totais: ${total}</div>
          <div class="custom-info">Tempo de jogo: ${formatTime(totalTime)}</div>
          <div class="custom-info">Frases acertadas: ${correct}</div>
          <div class="custom-info">Frases erradas: ${wrong}</div>
          <div class="custom-info">Porcentagem de acertos: ${acc}%</div>
          <div class="custom-info">Média de tempo por frase: ${avg}</div>
          <div class="custom-info">Uso de reportar: ${reportPerc}%</div>
        `;
        const red = stats.wrongRanking || [];
        const green = stats.reportRanking || [];
        if (red.length) {
          const title = document.createElement('h2');
          title.textContent = 'Ranking vermelho';
          title.className = 'ranking-title-red';
          section.appendChild(title);
          section.appendChild(createRankingTable([...red].sort((a,b) => b.count - a.count), 'red', [
            { field: 'expected', label: 'Esperado' },
            { field: 'input', label: 'Entrada' },
            { field: 'folder', label: 'Pasta' },
            { field: 'count', label: 'Erros' }
          ]));
        }
        if (green.length) {
          const title = document.createElement('h2');
          title.textContent = 'Ranking verde limão';
          title.className = 'ranking-title-lime';
          section.appendChild(title);
          section.appendChild(createRankingTable(green, 'lime', [
            { field: 'expected', label: 'Esperado' },
            { field: 'input', label: 'Entrada' },
            { field: 'folder', label: 'Pasta' },
            { field: 'level', label: 'Nível de reports' }
          ]));
        }
        container.appendChild(section);
      }
      const levelTitle = document.createElement('h1');
      levelTitle.className = 'custom-title';
      levelTitle.textContent = 'Detalhe dos níveis';
      container.appendChild(levelTitle);
      const details = JSON.parse(localStorage.getItem('levelDetails') || '[]');
      if (details.length) {
        const table = document.createElement('table');
        table.className = 'ranking-table';
        const header = document.createElement('tr');
        header.innerHTML = '<th>Nível</th><th>Precisão</th><th>Velocidade</th><th>Reports</th>';
        table.appendChild(header);
        details.forEach(d => {
          const row = document.createElement('tr');
          row.innerHTML = `<td>${d.level}</td><td>${d.accuracy}%</td><td>${d.speed}%</td><td>${d.reports}%</td>`;
          table.appendChild(row);
        });
        container.appendChild(table);
      }
    });
  </script>
  <footer class="page-footer">
    <nav id="main-nav">
      <a href="index.html" class="nav-item" aria-label="Home">
        <svg aria-hidden="true" viewBox="0 0 24 24" class="nav-item__icon">
          <path d="M4.5 10.5 12 4l7.5 6.5" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" />
          <path d="M6 11v8.5a1.5 1.5 0 0 0 1.5 1.5H16.5A1.5 1.5 0 0 0 18 19.5V11" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" />
          <path d="M10 21V14h4v7" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
        <span class="sr-only">Home</span>
      </a>
      <a href="fun.html" class="nav-item" aria-label="Opções de jogo">
        <svg aria-hidden="true" viewBox="0 0 24 24" class="nav-item__icon">
          <line x1="4" y1="6" x2="20" y2="6" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" />
          <circle cx="10" cy="6" r="2.4" fill="none" stroke="currentColor" stroke-width="1.8" />
          <line x1="4" y1="12" x2="20" y2="12" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" />
          <circle cx="16" cy="12" r="2.4" fill="none" stroke="currentColor" stroke-width="1.8" />
          <line x1="4" y1="18" x2="20" y2="18" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" />
          <circle cx="8" cy="18" r="2.4" fill="none" stroke="currentColor" stroke-width="1.8" />
        </svg>
        <span class="sr-only">Opções de jogo</span>
      </a>
      <a href="play.html" class="nav-item" aria-label="Estatísticas">
        <svg aria-hidden="true" viewBox="0 0 24 24" class="nav-item__icon">
          <line x1="5" y1="20" x2="19" y2="20" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" />
          <line x1="7" y1="20" x2="7" y2="12" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" />
          <line x1="12" y1="20" x2="12" y2="8" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" />
          <line x1="17" y1="20" x2="17" y2="5" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" />
        </svg>
        <span class="sr-only">Estatísticas</span>
      </a>
      <a href="custom.html" class="nav-item active" aria-label="Social">
        <svg aria-hidden="true" viewBox="0 0 24 24" class="nav-item__icon">
          <path d="M5 5h14a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1h-4.5L12 19l-2.5-4H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1z" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" />
          <line x1="8" y1="9" x2="16" y2="9" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" />
          <line x1="8" y1="12" x2="14" y2="12" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" />
        </svg>
        <span class="sr-only">Social</span>
      </a>
      <a href="ranking.html" class="nav-item" aria-label="Ranking">
        <svg aria-hidden="true" viewBox="0 0 24 24" class="nav-item__icon">
          <path d="M8 4h8v2a3 3 0 0 0 3 3h0a5 5 0 0 1-5 5H10a5 5 0 0 1-5-5h0a3 3 0 0 0 3-3z" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" />
          <path d="M6 6H4a3 3 0 0 0 3 3" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" />
          <path d="M18 6h2a3 3 0 0 1-3 3" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" />
          <path d="M9 16h6" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" />
          <path d="M10.5 19.5h3" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" />
        </svg>
        <span class="sr-only">Ranking</span>
      </a>
      <div class="nav-item--user">
        <button class="nav-item nav-item__trigger" type="button" aria-expanded="false" aria-controls="user-menu">
          <svg aria-hidden="true" viewBox="0 0 24 24" class="nav-item__icon">
            <circle cx="12" cy="8" r="4" fill="none" stroke="currentColor" stroke-width="1.8" />
            <path d="M6 20c0-3.3 2.7-6 6-6s6 2.7 6 6" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
          <span class="sr-only">Perfil</span>
        </button>
        <div id="user-menu" class="nav-item__menu" hidden>
          <a href="perfil.html" class="nav-item__menu-link">Perfil</a>
          <button id="logout-btn" class="nav-item__menu-link nav-item__menu-link--button" type="button">Sair</button>
        </div>
      </div>
    </nav>
  </footer>
</body>
</html>
