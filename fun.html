<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
  <title>Fun</title>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  <script src="js/settings.js"></script>
  <script src="js/auth.js"></script>
</head>
<body class="page-fun">
  <header class="site-header" id="global-header">
    <div class="site-header__profile">
      <div class="site-header__avatar-container">
        <img
          src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2296%22%20height%3D%2296%22%20viewBox%3D%220%200%2096%2096%22%3E%3Cdefs%3E%3ClinearGradient%20id%3D%22g%22%20x1%3D%220%22%20y1%3D%220%22%20x2%3D%221%22%20y2%3D%221%22%3E%3Cstop%20offset%3D%220%22%20stop-color%3D%22%23c5d7ff%22/%3E%3Cstop%20offset%3D%221%22%20stop-color%3D%22%237fa8ff%22/%3E%3C/linearGradient%3E%3C/defs%3E%3Ccircle%20cx%3D%2248%22%20cy%3D%2248%22%20r%3D%2248%22%20fill%3D%22url(%23g)%22/%3E%3Cpath%20fill%3D%22%23fff%22%20opacity%3D%220.85%22%20d%3D%22M48%2046a14%2014%200%201%200-14-14A14%2014%200%200%200%2048%2046Zm0%207c-12.1%200-22%206.56-22%2014.66V70a24%2024%200%200%200%2044%200v-2.34C70%2059.56%2060.1%2053%2048%2053Z%22/%3E%3C/svg%3E"
          alt="Foto do usu√°rio"
          class="site-header__avatar"
          id="header-avatar"
        >
      </div>
      <div class="site-header__text">
        <span class="site-header__name" id="header-username">Jogador</span>
        <span class="site-header__level" id="header-level">N√≠vel 1</span>
      </div>
    </div>
    <div class="site-header__actions">
      <button id="login-btn" class="site-header__button" type="button">Entrar</button>
    </div>
  </header>
  <main id="fun-container">
    <h1>Op√ß√µes de jogo</h1>
    <form id="fun-form">
      <section class="fun-section">
        <h2>Tema</h2>
        <div class="theme-options">
          <label><input type="radio" name="theme" value="light"> Branco</label>
          <label><input type="radio" name="theme" value="dark"> Preto</label>
          <label><input type="radio" name="theme" value="blue"> Azul</label>
        </div>
      </section>
      <section class="fun-section">
        <h2>Pontua√ß√£o</h2>
        <label class="fun-field">Pontos ganhos por acerto
          <input type="number" id="pointsPerHit" min="0" step="50">
        </label>
        <label class="fun-field">Pontos perdidos por segundo
          <input type="number" id="pointsLossPerSecond" min="0" step="10">
        </label>
        <label class="fun-field">Pontos iniciais por rodada
          <input type="number" id="startingPoints" min="0" step="50">
        </label>
      </section>
      <p class="fun-note">Ao atingir 25.000 pontos a rodada √© conclu√≠da automaticamente, sem carregar novas frases.</p>
      <div class="fun-actions">
        <button type="submit">Salvar configura√ß√µes</button>
        <span id="fun-feedback" role="status" aria-live="polite"></span>
      </div>
    </form>
  </main>
  <div id="login-flow" class="login-flow hidden" role="dialog" aria-modal="true" aria-labelledby="login-flow-title" aria-hidden="true">
    <div class="login-flow__panel">
      <img src="selos%20modos%20de%20jogo/logoitalk2.png" alt="Logo American Life" class="login-flow__logo" width="70" height="70">
      <h1 id="login-flow-title" class="login-flow__title">Bem-vindo</h1>
      <form id="login-flow-form" class="login-flow__form" autocomplete="off" novalidate>
        <div class="login-flow__step login-flow__step--active" data-step="username">
          <label for="login-flow-username">Nome de usu√°rio</label>
          <input type="text" id="login-flow-username" name="login-flow-username" maxlength="40" required>
          <button type="button" class="login-flow__submit" data-action="next">Continuar</button>
        </div>
        <div class="login-flow__step" data-step="password">
          <label for="login-flow-password">Senha</label>
          <input type="password" id="login-flow-password" name="login-flow-password" required>
          <button type="button" class="login-flow__submit" data-action="next">Continuar</button>
        </div>
        <div class="login-flow__step" data-step="confirm">
          <label for="login-flow-confirm">Confirmar senha</label>
          <input type="password" id="login-flow-confirm" name="login-flow-confirm" required>
          <button type="submit" class="login-flow__submit">Criar conta</button>
        </div>
        <p id="login-flow-error" class="login-flow__error" role="alert"></p>
      </form>
    </div>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const api = window.playtalkSettings;
      const form = document.getElementById('fun-form');
      const radios = [...form.querySelectorAll('input[name="theme"]')];
      const pointsPerHit = document.getElementById('pointsPerHit');
      const pointsLossPerSecond = document.getElementById('pointsLossPerSecond');
      const startingPoints = document.getElementById('startingPoints');
      const feedback = document.getElementById('fun-feedback');

      function load() {
        const settings = api ? api.loadSettings() : {};
        const theme = settings.theme || 'light';
        radios.forEach(r => { r.checked = r.value === theme; });
        pointsPerHit.value = settings.pointsPerHit ?? api.DEFAULT_SETTINGS.pointsPerHit;
        pointsLossPerSecond.value = settings.pointsLossPerSecond ?? api.DEFAULT_SETTINGS.pointsLossPerSecond;
        startingPoints.value = settings.startingPoints ?? api.DEFAULT_SETTINGS.startingPoints;
      }

      function save(event) {
        event.preventDefault();
        const theme = (radios.find(r => r.checked) || {}).value || 'light';
        const settings = {
          theme,
          pointsPerHit: Number(pointsPerHit.value) || 0,
          pointsLossPerSecond: Number(pointsLossPerSecond.value) || 0,
          startingPoints: Number(startingPoints.value) || 0
        };
        if (api) {
          api.saveSettings(settings);
          api.applyTheme(settings.theme);
        }
        feedback.textContent = 'Configura√ß√µes salvas!';
        setTimeout(() => { feedback.textContent = ''; }, 2000);
      }

      load();
      form.addEventListener('submit', save);
      radios.forEach(radio => {
        radio.addEventListener('change', () => {
          if (radio.checked && api) {
            api.applyTheme(radio.value);
          }
        });
      });
    });
  </script>
  <footer class="page-footer">
    <nav id="main-nav">
      <a href="index.html" class="nav-item" aria-label="Home">
        <span aria-hidden="true">‚ñ∂</span>
        <span class="sr-only">Home</span>
      </a>
      <a href="fun.html" class="nav-item active" aria-label="Fun">
        <span aria-hidden="true">üåê</span>
        <span class="sr-only">Fun</span>
      </a>
      <a href="play.html" class="nav-item" aria-label="Play">
        <span aria-hidden="true">üìä</span>
        <span class="sr-only">Play</span>
      </a>
      <a href="custom.html" class="nav-item" aria-label="Custom">
        <span aria-hidden="true">üí†</span>
        <span class="sr-only">Custom</span>
      </a>
      <a href="ranking.html" class="nav-item" aria-label="Ranking">
        <span aria-hidden="true">üèÜ</span>
        <span class="sr-only">Ranking</span>
      </a>
      <div class="nav-item--user">
        <button class="nav-item nav-item__trigger" type="button" aria-expanded="false" aria-controls="user-menu">
          <span aria-hidden="true">üë®üèª</span>
          <span class="sr-only">Usu√°rio</span>
        </button>
        <div id="user-menu" class="nav-item__menu" hidden>
          <a href="perfil.html" class="nav-item__menu-link">Perfil</a>
          <button id="logout-btn" class="nav-item__menu-link nav-item__menu-link--button" type="button">Sair</button>
        </div>
      </div>
    </nav>
  </footer>
</body>
</html>
